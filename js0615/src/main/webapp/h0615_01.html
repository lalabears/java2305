<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>그래프 그리기</title>
		<script src="http://code.jquery.com/jquery-latest.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<script type="text/javascript">
		
			/*function dataBtn(){
				
				let arr1 = new Array();
				let arr2 = new Array();
				let stulabel = "학생성적표";
				
				
				$.ajax({
					url:"js/data.json",
		  			dataType:"json",
		  			type:"get",
		  			data:{"conType":"notice"},
		  			success:function(data){
		  				alert("success");
		  				for(var i = 0; i<data.length;i++){
		  					arr1.push(data[i].name);
		  					arr2.push(data[i].total);
		  				}
		  			},error:function(){
		  				alert("fail");
		  			}
				}); // ajax
			}*/
				let arr1 = new Array();
				let arr2 = new Array();
				let stulabel = "학생성적표";
			function chartBtn(){
				
				// 데이터 가져오기 
				$.ajax({
					url:"js/data.json",
		  			dataType:"json",
		  			type:"get",
		  			data:{"conType":"notice"},
		  			success:function(data){
		  				// alert("success");
		  				for(var i = 0; i<data.length;i++){
		  					arr1.push(data[i].name);
		  					arr2.push(data[i].total);
		  				}
		  			},error:function(){
				  		alert("fail");
				 	} // error
				}); // ajax
		  				
						// 그래프그리기
						const ctx = document.getElementById('myChart');
						
						let arrX = ['2022.1', '2022.2', '2022.3', '2022.4', '2023.1', '2023.2'];				
						let arrY = [100, 190, 300, 55, 200, 39];
						
						new Chart(ctx, {
						    type: 'bar',
						    data: {
						      labels: arr1,
						      datasets: [{
						        label: stulabel,
						        data: arr2,
						        borderWidth: 1,
						        backgroundColor: [
						            'rgba(255, 99, 132, 0.2)',
						            'rgba(255, 159, 64, 0.2)',
						            'rgba(255, 205, 86, 0.2)',
						            'rgba(75, 192, 192, 0.2)',
						            'rgba(54, 162, 235, 0.2)',
						            'rgba(153, 102, 255, 0.2)',
						            'rgba(201, 203, 207, 0.2)'
						          ],
						          borderColor: [
						            'rgb(255, 99, 132)',
						            'rgb(255, 159, 64)',
						            'rgb(255, 205, 86)',
						            'rgb(75, 192, 192)',
						            'rgb(54, 162, 235)',
						            'rgb(153, 102, 255)',
						            'rgb(201, 203, 207)'
						          ]
						      }]
						    },
						    options: {
						      scales: {
						        y: {
						          beginAtZero: true
						        }
						      }
						    }
						  }); //chart
				  	
				
			}// chartBtn
		</script>
		<style type="text/css">
		*{padding: 0; margin: 0;}
		button{width: 120px; height: 30px; text-align: center;}
		div{width: 900px; height: 700px; margin: 20px auto; border: 2px solid black;}
		
		</style>
	</head>
	<body>
		<button onclick="dataBtn()">데이터 가져오기</button><br>
		<button onclick="chartBtn()">그래프 그리기</button>
		<br>
		<br>
		<div>
 				<canvas id="myChart"></canvas>
		</div>
	</body>
</html>